@import utils._
@(model: Form[ReportFilingModel], validation: ReportFilingModelValidation, company: CompanySummary, date: UiDate, datePicker: DatePickerHelper)
@import play.data.FormFactory
@import views.html.helper
@import views.html.shared._
@import utils._
<div class="breadcrumbs">
    <ol>
        <li><a href="@routes.Home.index()">Home</a></li>
        <li><a href="@routes.FileReport.index()">Duty to report for large businesses</a></li>
        <li><a href="@routes.FileReport.start()">File a payment report</a></li>
    </ol>
</div>
<h1 class="heading-xlarge">File a report</h1>

@if(!validation.isValid()) {
    <div class="error-summary" role="group" aria-labelledby="error-summary-heading" tabindex="-1">
        <h1 class="heading-medium error-summary-heading" id="error-summary-heading">
            The form contains invalid entries
        </h1>

        <p>
            Please correct the errors shown below.
        </p>
    </div>
}
<form action="@routes.FileReport.reviewFiling()" method="POST">
    <input type="hidden" id="TargetCompanyCompaniesHouseIdentifier" name="TargetCompanyCompaniesHouseIdentifier" value="@company.CompaniesHouseIdentifier">

    <fieldset class="form-group">
        <label class="form-label" for="TargetCompanyNamePublic">Company</label>
        <input class="form-control" type="text" disabled="disabled" id="TargetCompanyNamePublic" value="@company.Name">
    </fieldset>


    <fieldset class="form-group">
        <label class="form-label" for="FilingDate2">Filing date</label>
        <input class="form-control" type="text" disabled="disabled" id="FilingDate2" value="@date.ToFriendlyString()">
    </fieldset>

    <fieldset class="form-group @validation.validateStartDate().cssClass()">
        <label class="form-label">
            <span>Start date</span>
            <span class="error-message">@validation.validateStartDate().errorMessage()</span>
        </label>
        @_formSelect("StartDate_day", model.get().getStartDate_day().toString(), datePicker.days)
        @_formSelect("StartDate_month", model.get().getStartDate_month().toString(), datePicker.months)
        @_formSelect("StartDate_year", model.get().getStartDate_year().toString(), datePicker.years)
    </fieldset>
    <fieldset class="form-group @validation.validateEndDate().cssClass()">
        <label class="form-label">
            <span>End date</span>
            <span class="error-message">@validation.validateEndDate().errorMessage()</span>
        </label>
        @_formSelect("EndDate_day", model.get().getEndDate_day().toString(), datePicker.days)
        @_formSelect("EndDate_month", model.get().getEndDate_month().toString(), datePicker.months)
        @_formSelect("EndDate_year", model.get().getEndDate_year().toString(), datePicker.years)
    </fieldset>
    <fieldset class="form-group @validation.validateAverageTimeToPay().cssClass()">
        <label class="form-label" for="RecordOne">
            <span>Average time to pay</span>
            <span class="error-message">@validation.validateAverageTimeToPay().errorMessage()</span>
        </label>
        <input class="form-control" type="text" id="RecordOne" name="AverageTimeToPay" value="@model.get().getAverageTimeToPayAsDecimal()">
    </fieldset>
    <fieldset class="form-group @validation.validatePercentInvoicesPaidBeyondAgreedTerms().cssClass()">
        <label class="form-label" for="RecordTwo">
            <span>Percentage of invoices paid later than agreed terms</span>
            <span class="error-message">@validation.validatePercentInvoicesPaidBeyondAgreedTerms().errorMessage()</span>
        </label>
        <input class="form-control" type="text" id="RecordTwo" name="PercentInvoicesPaidBeyondAgreedTerms" value="@model.get().getPercentInvoicesPaidBeyondAgreedTermsAsDecimal()">
    </fieldset>

    <div class="form-group @validation.validateTimePercentages().cssClass()" style="margin-bottom:15px;">
        <span class="error-message">@validation.validateTimePercentages().errorMessage()</span>
        <fieldset class="form-group @validation.validatePercentInvoicesWithin30Days().cssClass()">
            <label class="form-label" for="RecordThree">
                <span>Percentage of invoices paid within 30 days</span>
                <span class="error-message">@validation.validatePercentInvoicesWithin30Days().errorMessage()</span>
            </label>
            <input class="form-control" type="text" id="RecordThree" name="PercentInvoicesWithin30Days" value="@model.get().getPercentInvoicesWithin30DaysAsDecimal()">
        </fieldset>
        <fieldset class="form-group @validation.validatePercentInvoicesWithin60Days().cssClass()">
            <label class="form-label" for="RecordFour">
                <span>Percentage of invoices paid within 31 to 60 days</span>
                <span class="error-message">@validation.validatePercentInvoicesWithin60Days().errorMessage()</span>
            </label>
            <input class="form-control" type="text" id="RecordFour" name="PercentInvoicesWithin60Days" value="@model.get().getPercentInvoicesWithin60DaysAsDecimal()">
        </fieldset>
        <fieldset class="form-group @validation.validatePercentInvoicesBeyond60Days().cssClass()" style="margin-bottom:15px;">
            <label class="form-label" for="RecordFive">
                <span>Percentage of invoices paid later than 60 days</span>
                <span class="error-message">@validation.validatePercentInvoicesBeyond60Days().errorMessage()</span>
            </label>
            <input class="form-control" type="text" id="RecordFive" name="PercentInvoicesBeyond60Days" value="@model.get().getPercentInvoicesBeyond60DaysAsDecimal()">
        </fieldset>
    </div>

    <fieldset class="form-group @validation.validatePaymentTerms().cssClass()">
        <label class="form-label" for="RecordSix">
            <span>Payment terms</span>
            <span class="error-message">@validation.validatePaymentTerms().errorMessage()</span>
        </label>
        <textarea class="form-control" id="RecordSix" name="PaymentTerms">@model.get().getPaymentTerms()</textarea>
    </fieldset>
    <fieldset class="form-group @validation.validateDisputeResolution().cssClass()">
        <label class="form-label" for="RecordSeven">
            <span>Dispute resolution</span>
            <span class="error-message">@validation.validateDisputeResolution().errorMessage()</span>
        </label>
        <textarea class="form-control" id="RecordSeven" name="DisputeResolution">@model.get().getDisputeResolution()</textarea>
    </fieldset>


    <fieldset class="inline @validation.validateOfferEInvoicing().cssClass()">
        <label class="form-label">
            <span>Do you offer E-Invoicing?</span>
            <span class="error-message">@validation.validateOfferEInvoicing().errorMessage()</span>
        </label>
        <label class="block-label" for="OfferEInvoicing-yes">
            <input id="OfferEInvoicing-yes" name="OfferEInvoicing" type="radio" value="1" @{if (model.get().isOfferEInvoicing() != null && model.get().isOfferEInvoicing()) "checked='checked'"}>
            Yes
        </label>
        <label class="block-label" for="OfferEInvoicing-no">
            <input id="OfferEInvoicing-no" name="OfferEInvoicing" type="radio" value="0" @{if (model.get().isOfferEInvoicing() != null && !model.get().isOfferEInvoicing()) "checked='checked'"}>
            No
        </label>
    </fieldset>

    <fieldset class="inline @validation.validateOfferSupplyChainFinance().cssClass()">

        <label class="form-label">
            <span>Do you offer supply chain finance options?</span>
            <span class="error-message">@validation.validateOfferSupplyChainFinance().errorMessage()</span>

        </label>
        <label class="block-label" for="OfferSupplyChainFinance-yes">
            <input id="OfferSupplyChainFinance-yes" name="OfferSupplyChainFinance" type="radio" value="1" @{if (model.get().isOfferSupplyChainFinance != null && model.get().isOfferSupplyChainFinance()) "checked='checked'"}>
            Yes
        </label>
        <label class="block-label" for="OfferSupplyChainFinance-no">
            <input id="OfferSupplyChainFinance-no" name="OfferSupplyChainFinance" type="radio" value="0" @{if(model.get().isOfferSupplyChainFinance != null && !model.get().isOfferSupplyChainFinance()) "checked='checked'"}>
            No
        </label>
    </fieldset>
    <fieldset class="inline @validation.validateRetentionChargesInPolicy().cssClass()">
        <label class="form-label">
            <span>Policy cover retention charges</span>
            <span class="error-message">@validation.validateRetentionChargesInPolicy().errorMessage()</span>
        </label>
        <label class="block-label" for="RetentionChargesInPolicy-yes">
            <input id="RetentionChargesInPolicy-yes" name="RetentionChargesInPolicy" type="radio" value="1" @{if(model.get().isRetentionChargesInPolicy() !=null && model.get().isRetentionChargesInPolicy()) "checked='checked'"}>
            Yes
        </label>
        <label class="block-label" for="RetentionChargesInPolicy-no">
            <input id="RetentionChargesInPolicy-no" name="RetentionChargesInPolicy" type="radio" value="0" @{if(model.get().isRetentionChargesInPolicy() !=null && !model.get().isRetentionChargesInPolicy()) "checked='checked'"}>
            No
        </label>
    </fieldset>
    <fieldset class="inline @validation.validateRetentionChargesInPast().cssClass()">
        <label class="form-label">
            <span>Ever raised retention charges?</span>
            <span class="error-message">@validation.validateRetentionChargesInPast().errorMessage()</span>
        </label>
        <label class="block-label" for="RetentionChargesInPast-yes">
            <input id="RetentionChargesInPast-yes" name="RetentionChargesInPast" type="radio" value="1" @{if(model.get().isRetentionChargesInPast() !=null && model.get().isRetentionChargesInPast()) "checked='checked'"}>
            Yes
        </label>
        <label class="block-label" for="RetentionChargesInPast-no">
            <input id="RetentionChargesInPast-no" name="RetentionChargesInPast" type="radio" value="0" @{if(model.get().isRetentionChargesInPast() !=null && !model.get().isRetentionChargesInPast()) "checked='checked'"}>
            No
        </label>
    </fieldset>

    <fieldset class="form-group @validation.validatePaymentCodes().cssClass()">
        <label class="form-label" for="RecordEight">
            <span>Payment codes (optional)</span>
            <span class="error-message">@validation.validatePaymentCodes().errorMessage()</span>
        </label>
        <textarea class="form-control" id="RecordEight" name="PaymentCodes">@model.get().getPaymentCodes()</textarea>
    </fieldset>

    <input type="submit" class="button" value="Review">
</form>
<p>
    <a href="@routes.FileReport.index()" class="link-back">Start over</a>
</p>