@(model: Form[ReportFilingModel], company: CompanySummary, date: UiDate, confirmedError: scala.Boolean)
@import play.data.FormFactory
@import models.UiDate
<div class="breadcrumbs">
    <ol>
        <li><a href="@routes.Home.index()">@shared._name()</a></li>
    </ol>
</div>
<h1 class="heading-xlarge">Check your report before publishing</h1>
<div class="notice">
    <i class="icon icon-important">
        <span class="visually-hidden">Warning</span>
    </i>
    <strong>If your report is incorrect or misleading, you could face a fine.</strong>
</div>
@if(confirmedError == true) {
<div class="error-summary" role="group" aria-labelledby="error-summary-heading" tabindex="-1">
    <h1 class="heading-medium error-summary-heading" id="error-summary-heading">
        You need to confirm this report before publishing it
    </h1>

    <p>
        Please confirm this report by ticking the checkbox below.
    </p>
</div>
}
<table>
    <tr>
        <td>
            Company
        </td>
        <td>
            @company.Name
        </td>
    </tr>
    <tr>
        <td>
            Filing date
        </td>
        <td>
            @date.ToFriendlyString()
        </td>
    </tr>
    <tr>
        <td>
            Start date
        </td>
        <td>
            @model.get().getStartDateString()
        </td>
    </tr>
    <tr>
        <td>
            End date
        </td>
        <td>
            @model.get().getEndDateString()
        </td>
    </tr>
    <tr>
        <td>
            Average number of days until payment
        </td>
        <td>
            @model.get().getAverageTimeToPayAsDecimal()
        </td>
    </tr>
    <tr>
        <td>
            Percentage of invoices paid later than agreed terms
        </td>
        <td>
            @model.get().getPercentInvoicesPaidBeyondAgreedTermsAsDecimal()%
        </td>
    </tr>
    <tr>
        <td>
            Percentage of invoices paid within 30 days
        </td>
        <td>
            @model.get().getPercentInvoicesWithin30DaysAsDecimal()%
        </td>
    </tr>
    <tr>
        <td>
            Percentage of invoices paid within 31 to 60 days
        </td>
        <td>
            @model.get().getPercentInvoicesWithin60DaysAsDecimal()%
        </td>
    </tr>
    <tr>
        <td>
            Percentage of invoices paid later than 60 days
        </td>
        <td>
            @model.get().getPercentInvoicesBeyond60DaysAsDecimal()%
        </td>
    </tr>
    <tr>
        <td>
            Payment terms
        </td>
        <td>
            @model.get().getPaymentTerms()
        </td>
    </tr>
    <tr>
        <td>
            Dispute resolution
        </td>
        <td>
            @model.get().getDisputeResolution()
        </td>
    </tr>
    <tr>
        <td>
            Offer E-Invoicing
        </td>
        <td>
            @{if (model.get().isOfferEInvoicing() != null) if (model.get().isOfferEInvoicing()) "Yes" else "No"}
        </td>
    </tr>
    <tr>
        <td>
            Offer supply chain finance
        </td>
        <td>
            @{if (model.get().isOfferSupplyChainFinance() != null) if (model.get().isOfferSupplyChainFinance()) "Yes" else "No"}
        </td>
    </tr>
    <tr>
        <td>
            Retention charges covered in policy
        </td>
        <td>
            @{if (model.get().isRetentionChargesInPolicy() != null) if (model.get().isRetentionChargesInPolicy()) "Yes" else "No"}
        </td>
    </tr>
    <tr>
        <td>
            Retention charges made in the past
        </td>
        <td>
            @{if (model.get().isRetentionChargesInPast() != null) if (model.get().isRetentionChargesInPast()) "Yes" else "No"}
        </td>
    </tr>
    <tr>
        <td>
            Payment code paticipation
        </td>
        <td>
            @model.get().getPaymentCodes()
        </td>
    </tr>

</table>

<form action="@routes.FileReport.submitFiling()" method="POST">
    <input type="hidden" name="TargetCompanyCompaniesHouseIdentifier" value="@company.CompaniesHouseIdentifier">
    <input type="hidden" name="AverageTimeToPay" value="@model.get().getAverageTimeToPayAsDecimal()">
    <input type="hidden" name="PercentInvoicesPaidBeyondAgreedTerms" value="@model.get().getPercentInvoicesPaidBeyondAgreedTermsAsDecimal()">
    <input type="hidden" name="PercentInvoicesWithin30Days" value="@model.get().getPercentInvoicesWithin30DaysAsDecimal()">
    <input type="hidden" name="PercentInvoicesWithin60Days" value="@model.get().getPercentInvoicesWithin60DaysAsDecimal()">
    <input type="hidden" name="PercentInvoicesBeyond60Days" value="@model.get().getPercentInvoicesBeyond60DaysAsDecimal()">

    <input type="hidden" name="StartDate_year" value="@model.get().getStartDate_year()">
    <input type="hidden" name="StartDate_month" value="@model.get().getStartDate_month()">
    <input type="hidden" name="StartDate_day" value="@model.get().getStartDate_day()">

    <input type="hidden" name="EndDate_year" value="@model.get().getEndDate_year()">
    <input type="hidden" name="EndDate_month" value="@model.get().getEndDate_month()">
    <input type="hidden" name="EndDate_day" value="@model.get().getEndDate_day()">

    <input type="hidden" name="PaymentTerms" value="@model.get().getPaymentTerms()">
    <input type="hidden" name="DisputeResolution" value="@model.get().getDisputeResolution()">
    <input type="hidden" name="OfferEInvoicing" value="@model.get().isOfferEInvoicing()">
    <input type="hidden" name="OfferSupplyChainFinance" value="@model.get().isOfferSupplyChainFinance()">
    <input type="hidden" name="RetentionChargesInPolicy" value="@model.get().isRetentionChargesInPolicy()">
    <input type="hidden" name="RetentionChargesInPast" value="@model.get().isRetentionChargesInPast()">
    <input type="hidden" name="PaymentCodes" value="@model.get().getPaymentCodes()">

    <div class="scannable-wrapper">
    <fieldset class='confirmation form-group @(confirmedError match { case true => "error" case _ => ""})'>
        <h3 class="bold-medium">Confirm this statement then publish your report</h3>
        @if(confirmedError == true) {
            <span class="error-message">You must tick the checkbox to proceed.</span>
        }
        <input type="hidden" name="confirmed" value="0">
        <label class="block-label" for="confirmed">
            <input type="checkbox" name="confirmed" id="confirmed" value="1">
            I confirm that the information provided in this report is accurate and has been approved by a director of my company or a designated member of my limited liability partnership.
        </label>
    </fieldset>
    <input type="submit" class="button" value="Publish your report">
    </div>
</form>

<form action="@routes.FileReport.editFiling()" method="POST">
    <input type="hidden" name="TargetCompanyCompaniesHouseIdentifier" value="@company.CompaniesHouseIdentifier">
    <input type="hidden" name="AverageTimeToPay" value="@model.get().getAverageTimeToPayAsDecimal()">
    <input type="hidden" name="PercentInvoicesPaidBeyondAgreedTerms" value="@model.get().getPercentInvoicesPaidBeyondAgreedTermsAsDecimal()">
    <input type="hidden" name="PercentInvoicesWithin30Days" value="@model.get().getPercentInvoicesWithin30DaysAsDecimal()">
    <input type="hidden" name="PercentInvoicesWithin60Days" value="@model.get().getPercentInvoicesWithin60DaysAsDecimal()">
    <input type="hidden" name="PercentInvoicesBeyond60Days" value="@model.get().getPercentInvoicesBeyond60DaysAsDecimal()">

    <input type="hidden" name="StartDate_year" value="@model.get().getStartDate_year()">
    <input type="hidden" name="StartDate_month" value="@model.get().getStartDate_month()">
    <input type="hidden" name="StartDate_day" value="@model.get().getStartDate_day()">

    <input type="hidden" name="EndDate_year" value="@model.get().getEndDate_year()">
    <input type="hidden" name="EndDate_month" value="@model.get().getEndDate_month()">
    <input type="hidden" name="EndDate_day" value="@model.get().getEndDate_day()">

    <input type="hidden" name="PaymentTerms" value="@model.get().getPaymentTerms()">
    <input type="hidden" name="DisputeResolution" value="@model.get().getDisputeResolution()">
    <input type="hidden" name="OfferEInvoicing" value="@model.get().isOfferEInvoicing()">
    <input type="hidden" name="OfferSupplyChainFinance" value="@model.get().isOfferSupplyChainFinance()">
    <input type="hidden" name="RetentionChargesInPolicy" value="@model.get().isRetentionChargesInPolicy()">
    <input type="hidden" name="RetentionChargesInPast" value="@model.get().isRetentionChargesInPast()">
    <input type="hidden" name="PaymentCodes" value="@model.get().getPaymentCodes()">

    <input type="submit" class="button" value="Correct">
</form>